"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react-visible-observer"),t=require("react");const r=e=>{let{item:r,isVisible:n,refreshOnVisible:l,fetchItemData:s,children:a,itemLoader:i}=e;const[o,u]=t.useState(null),c=t.useRef(!1);return t.useEffect((()=>{s&&n&&(l||!c.current)&&s(r).then((e=>{u(e||null),c.current=!0}))}),[n,l,r,s]),t.createElement(t.Fragment,null,n?a(r,o):i)};Object.defineProperty(exports,"useIntersectionObserver",{enumerable:!0,get:function(){return e.useIntersectionObserver}}),exports.default=n=>{let{listData:l=[],renderItem:s=(e=>t.createElement(t.Fragment,null,e||"Loading data...")),refreshOnVisible:a=!1,fetchItemData:i,containerHeight:o="400px",itemStyle:u,listClassName:c=null,itemClassName:m=null,observerOptions:d={root:null,rootMargin:"0px",threshold:.1},onLoadMore:h,hasMore:f=!1,loader:b="",endMessage:v="",itemLoader:g=""}=n;const[p,O]=t.useState(new Set),I=t.useRef([]),y=t.useRef(null);e.useIntersectionObserver(I,((e,t)=>{const r=parseInt(t.target.id,10);O(e?e=>new Set(e).add(r):e=>{const t=new Set(e);return t.delete(r),t})}),null,d);return e.useIntersectionObserver(y,((e,t)=>{e&&f&&h&&h()}),null,{root:null,rootMargin:"0px",threshold:1}),t.createElement("div",{className:c,style:{height:o,overflowY:"auto"}},l.length?l.map(((e,n)=>t.createElement("div",{className:m,style:u,ref:e=>I.current[n]=e,key:n,id:n},t.createElement(r,{item:e,isVisible:p.has(n),refreshOnVisible:a,fetchItemData:i,itemStyle:u,itemLoader:g},s)))):null,f?t.createElement("div",{ref:y,style:{height:"1px"}},b):t.createElement("div",null,v))};
